{{>userHeader}}

<body>
	
	<div class="page-wrapper">


		<main class="main">
			<div class="page-header text-center" style="background-image: url('assets/images/page-header-bg.jpg')">
				<div class="container">
					<h1 class="page-title">Checkout<span>Shop</span></h1>
				</div><!-- End .container -->
			</div><!-- End .page-header -->
			<nav aria-label="breadcrumb" class="breadcrumb-nav">
				<div class="container">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="/">Home</a></li>
						<li class="breadcrumb-item"><a href="#">Shop</a></li>
						<li class="breadcrumb-item active" aria-current="page">Checkout</li>
					</ol>
				</div><!-- End .container -->
			</nav><!-- End .breadcrumb-nav -->
			

			<div class="page-content">
				<div class="checkout">
					<div class="container">
						<div class="checkout-discount">
							<form id='couponCode'>
								<input type="text" name='couponcode' class="form-control" required id="checkout-discount-input" >
								<label for="checkout-discount-input" class="text-truncate">Have a coupon? <span>Click here to enter your
										code</span></label>
							</form>

					


						</div><!-- End .checkout-discount -->
						<form id="checkout-form">
							<div class="row">
								<div class="col-lg-9">
									<h2 class="checkout-title">Billing Details</h2><!-- End .checkout-title -->
									{{#each address}}
									<tr>
										<td>
											<input checked value="{{this._id}}" type="radio" name="addressId">
											<span
												style="display: inline-block; height: 100px; width: 350px; border: 1px solid rgba(3, 91, 255, 0.73); margin-bottom: 20px; padding: 20px; border-radius: 6px;">
												<div class="row">
													<div> {{this.fname}} {{this.lname}}</div>
													{{this.address}},
													{{this.town}},
													{{this.state}},
													{{this.country}},
													{{this.pincode}},
													<div class="mb-2"> {{this.email}}, {{this.phone}}</div>



												</div>
											</span>
											{{!-- <a href="">delete</a> --}}
										</td> 
										<td>
											<a class="btn-remove" href="edit/address/{{this._id}}"><i class="icon-edit"></i></a>



										<button onclick="deleteAddress('{{this._id}}')" class="btn-remove"><i class="icon-close"></i></button></td><br>
									</tr>

									{{/each}}

									<div class="col-md-6">
										{{!-- <p class="mt-3">Click here for add new address</p> --}}
										{{!-- <button class="btn btn-outline-primary-2 btn-order btn-block mt-2" data-bs-toggle="modal"
											data-bs-target="#addAddress">Add New Adresses</button> --}}
										<button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal"
											data-bs-target="#addAddress"> Add New Address
										</button>
									</div>


									   
								
								</div><!-- End .col-lg-9 -->
								

								



								<aside class="col-lg-3">
									<div class="summary">
										<h3 class="summary-title">Your Order</h3><!-- End .summary-title -->

										<table class="table table-summary">
										

											<tbody>
										
												{{!-- <tr>
													<td><a href="#">Blue utility pinafore denimdress</a></td>
													<td>₹76,00</td>
												</tr> --}}
												<tr class="summary-subtotal">
													<td>Subtotal:</td>
													<td>₹{{total}}.00</td>
												</tr><!-- End .summary-subtotal -->
												<tr>
													<td>Shipping:</td>
													<td>Free shipping</td>
												</tr>
												<tr>
													<td>Discount:</td>
													<td>₹<span id="totalDiscount">{{totalDiscount}}</span>.00</td>
												</tr>
												<tr class="summary-total">
													<td>Total:</td>
													<td>₹<span id="finalAmount">{{totalAfterDiscount}}</span>.00</td>
												</tr><!-- End .summary-total -->
											</tbody>
										</table><!-- End .table table-summary -->
										
										<input type="number" name="actualAmount" value="{{total}}" hidden>
										<input type="number" name="totalDiscount" id="totalDiscount" value="{{totalDiscount}}" hidden>
										<input type="number" name="totalAfterDiscount" id="totalAfterDiscount" value="{{totalAfterDiscount}}" hidden>

										<div class="accordion-summary" id="accordion-payment">
											<div class="card">
												<div class="card-header" id="heading-3">
													<h2 class="card-title">
														<input type="radio" name="typeofpayment" value="cod" checked>
														<span class="px-2">cash on delivery</span>
													</h2>
												</div>
											</div><!-- End .card-header -->


											<div class="card mt-2">
												<div class="card-header" id="heading-4">
													<h2 class="card-title">
														<input type="radio" name="typeofpayment" value="paypal" checked>
														<span class="px-2">Paypal</span>
													</h2>
												</div><!-- End .card-header -->

											</div><!-- End .card -->


											<div class="card mt-2">
												<div class="card-header" id="heading-4">
													<h2 class="card-title">
														<input type="radio" name="typeofpayment" value="razorpay" checked>
														<span class="px-2">Razorpay</span>
													</h2>
												</div><!-- End .card-header -->

											</div><!-- End .card -->

											
											{{#if address}}
											<button type="submit" class="btn btn-outline-primary-2 btn-order btn-block mt-3">
												<span class="btn-text">Place Order</span>
												<span class="btn-hover-text">Proceed to Checkout</span>
											</button>
											{{else}}
											<a typ="button" class="btn btn-outline-primary-2 btn-order btn-block mt-3" data-bs-toggle="modal"
												data-bs-target="#addAddress">
												<span class="btn-text">Place Order</span>
												<span class="btn-hover-text text-white">Proceed to Checkout</span>
											</a>
											{{/if}}

										</div><!-- End .summary -->
								</aside><!-- End .col-lg-3 -->
							</div><!-- End .row -->
						</form>
					</div><!-- End .container -->
				</div><!-- End .checkout -->
			</div><!-- End .page-content -->
		</main><!-- End .main -->
	</div>
{{!-- add address modal--}}
	<div class="modal fade" id="addAddress" tabindex="-1" aria-labelledby="addAddressLabel" aria-hidden="true">
		{{!-- <form action="/user/add-address" method="post" enctype="multipart/form-data"> --}}
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title fs-5" id="addAddressLabel">Enter your Address </h3>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body ml-5">
						<div class="content-main">
							<form action="/add-address" method="post" id="addcheckout-form">
								<div class="row">
									<div class="col-lg-9">
										<h2 class="checkout-title"></h2><!-- End .checkout-title -->
										<div class="row">
											<div class="col-sm-6">
												<label>First Name *</label>
												<input type="text" name="fname" class="form-control" required>
											</div><!-- End .col-sm-6 -->

											<div class="col-sm-6">
												<label>Last Name *</label>
												<input type="text" name="lname" class="form-control" required>
											</div><!-- End .col-sm-6 -->
										</div><!-- End .row -->

										{{!-- <label>Company Name (Optional)</label>
										<input type="text" class="form-control"> --}}

										<label>Country *</label>
										<input type="text" name="country" value="India" readonly class="form-control" required>

										<label>Street address *</label>
										<input type="text" class="form-control" name="address" placeholder="House number and Street name"
											required>
										{{!-- <input type="text" class="form-control" placeholder="Appartments, suite, unit etc ..."
											required> --}}

										<div class="row">
											<div class="col-sm-6">
												<label>Town / City *</label>
												<input type="text" name="town" class="form-control" required>
											</div><!-- End .col-sm-6 -->

											<div class="col-sm-6">
												<label>State *</label>
												<input type="text" name="state" class="form-control" required>
											</div><!-- End .col-sm-6 -->
										</div><!-- End .row -->

										<div class="row">
											<div class="col-sm-6">
												<label>Postcode / ZIP *</label>
												<input type="text" name="pincode" class="form-control" required>
											</div><!-- End .col-sm-6 -->

											<div class="col-sm-6">
												<label>Phone *</label>
												<input type="tel" name="phone" class="form-control" required>
											</div><!-- End .col-sm-6 -->
										</div><!-- End .row -->

										<label>Email address *</label>
										<input type="email" name="email" class="form-control" required>
										<input type="text" name="userId" class="form-control" value="{{user._id}}" hidden>

									</div>
								</div>


						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
							<button type="submit" class="btn btn-primary">Add Address</button>
						</div>
					</div>
		</form>
	</div>
{{!-- add address maodal end --}}



	<script src="/javascripts/address.js"></script>
	<script src="/javascripts/placeorder.js"></script>
	<script src="/javascripts/couponCode.js"></script>

	